{% comment %} Display job postings from _data/jobs.yaml Usage: {% include
job-listings.html %} {% endcomment %} {% assign job_data = site.data.jobs |
default: empty_hash %} {% assign jobs = job_data.jobs | default: empty_array %}
{% assign active_jobs = jobs | where: "active", true %} {% if
job_data.last_updated %}
<p class="job-last-updated">
  <small>
    {% include icon.html icon="fa-solid fa-sync-alt" %} Last updated: {{
    job_data.last_updated }}
  </small>
</p>
{% endif %} {% if active_jobs.size > 0 %}
<div class="job-listings">
  {% for job in active_jobs %}
  <div class="job-posting">
    <div class="job-header">
      <h4>
        <a href="{{ job.link }}" target="_blank" rel="noopener noreferrer">
          {{ job.title }}
        </a>
      </h4>
      <div class="job-meta">
        <span class="job-date">
          {% include icon.html icon="fa-solid fa-calendar" %} Posted: {{
          job.published | date: "%B %d, %Y" }}
        </span>
        {% if job.expires and job.expires != '' %}
        <span class="job-expires">
          {% include icon.html icon="fa-solid fa-clock" %} Expires: {{
          job.expires | date: "%B %d, %Y" }}
        </span>
        {% endif %}
      </div>
    </div>

    {% if job.content_excerpt and job.content_excerpt != '' %}
    <div class="job-excerpt">
      <p>{{ job.content_excerpt | strip_html | truncatewords: 50 }}</p>
    </div>
    {% endif %}

    <!-- <div class="job-actions">
      {% include button.html link=job.link text="View Full Details"
      icon="fa-solid fa-external-link-alt" style="primary" %}
    </div> -->
  </div>
  {% endfor %}
</div>

<style>
  .job-listings {
    margin: 2rem 0;
  }

  .job-last-updated {
    margin: -0.5rem 0 1rem 0;
    color: var(--gray);
    font-style: italic;
  }

  .job-posting {
    border: 1px solid var(--dark-gray);
    border-radius: 8px;
    padding: 1.5rem;
    margin: 1rem 0;
    background: var(--light-gray);
  }

  .job-header h4 {
    margin: 0 0 0.5rem 0;
    color: var(--dark-gray);
  }

  .job-header h4 a {
    text-decoration: none;
    color: inherit;
  }

  .job-header h4 a:hover {
    color: var(--primary);
  }

  .job-meta {
    display: flex;
    gap: 1rem;
    font-size: 0.9rem;
    color: #6c757d;
    margin-bottom: 1rem;
  }

  .job-excerpt {
    margin: 1rem 0;
    padding: 0.5rem 0;
    border-top: 1px solid #e1e5e9;
    border-bottom: 1px solid #e1e5e9;
  }

  .job-excerpt p {
    margin: 0;
    font-style: italic;
    color: #495057;
  }

  .job-actions {
    margin-top: 1rem;
  }

  @media (max-width: 768px) {
    .job-meta {
      flex-direction: column;
      gap: 0.5rem;
    }
  }
</style>

{% else %}
<div class="no-jobs-message">
  <p>
    <em
      >No current job openings found. Please check back later or contact Dr.
      Namburete directly for potential opportunities.</em
    >
  </p>
</div>
{% endif %}
